(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{208:function(n,e,s){"use strict";s.r(e);var a=s(28),t=Object(a.a)({},(function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"adapter推送"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adapter推送"}},[n._v("#")]),n._v(" adapter推送")]),n._v(" "),s("p",[n._v("下发安装指定版本指令：")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('{\n    "element":"version",\n    "semver":"1.2.*"\n}\n\n//这里使用语义化版本\n//https://semver.org/lang/zh-CN/\n')])])]),s("p",[n._v("如果web端启用了v2ray，则会收到v2ray的json：")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('v2ray配置更新：{\n    "element": "v2ray",\n    "operation": "config",\n    "inboundConfig": {\n        "port": 443,\n        "grpcApiPort": 2333,\n        "tag":"xxx",     //需要唯一性,如果缺失则使用默认tag\n        "protocol": "vmess",    //"shadowsocks" (这里的ss拿来做ss+ws的提示，user信息还是按照ss信息给我就好)\n        "streamSettings": {\n            "network": "tcp", // "ws","kcp"\n            "kcpSettings": {\n                "header": {\n                    "type": "none"\n                }\n            },\n            "wsSettings": {\n                "path": "/",\n                "headers": {\n                    "Host": "v2ray.com"\n                }\n            },\n            "tlsSettings": {\n                "serverName": "server.com"\n            }\n        }\n\n    }\n}\n\nv2ray用户变更：{\n    "element":"v2ray",\n    "operation":"user",\n    "removes":[\n        {"email":"uuu@vv.com"}    //删除时只有email字段\n    ],\n    "updates":[    //新增、更新\n        {\n            "email":"ccc@dd.com",\n            "uuid":"xxxxxxxxx",\n            "speed": 40,\n            "language":1,\n            //用户的语言，用于显示审计规则等文字\n            "state":1/2/3/4,\n            //1：正常 2：过期 3：[余额/流量]耗尽 4：被禁止使用\n            //如果state不为1，用户访问任何页面都只会显示提示文字            \n            "alterId": 2 //默认2 \n        }\n    ]\n}\n//先处理remove再处理update\n')])])]),s("p",[n._v("（DEPRECATED：将不会支持shadowsocks）如果web端启用了shadowsocks，则会收到shadowsocks的json：")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('ss用户变更：{\n    "element":"shadowsocks",\n    "operation":"user",\n    "removes":[\n        {"email":"uuu@vv.com"}      //删除时只有email字段\n    ],\n    "updates":[\n        {\n            "email":"sss@dd.com",\n            "language":"zh-Hans",\n            "state":"normal","expired","exhausted","restricted",\n            "speed": 50,\n            "port": 110,\n            "password":"xxxx",\n            "method":"chacha20-ietf"\n        }\n    ]\n}\n//先处理remove再处理update\n')])])]),s("p",[n._v("审计规则json：")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('规则变更：{\n    "element":"censorship",\n    "removes":[\n        {"hashId":"..."}    //id不是数字，而是字符串（hash id）\n    ],\n    "update":[\n        {\n            "hashId":"...",\n            "rule":".*"\n        }\n    ]\n}\n\n//推荐使用DFA(确定有限状态机)实现，而不是遍历审计规则查看是否符合审计\n')])])])])}),[],!1,null,null,null);e.default=t.exports}}]);