# 设计

## 国际化

### 语言

由前后端共同支持，目前计划支持简体中文（zh-Hans）和美式英语（en-US）

### 货币

由前后端共同支持

### 时区

由前后端共同支持，支持所有UTC时区

## 计费模式

费用为：`固定租金`+`流量计费`

### 账单周期

账单周期由网站管理员自定义时间，例：管理员设置新用户的计费周期为7天，则新用户注册后每7天出一次账单

### 节点菜单

每个节点（node）拥有多个菜单（menu），例：

```text
节点A
菜单1：租金1元 流量1元/G 限速10M
菜单2：租金2元 流量2元/G 限速20M


节点B
菜单1：租金3元 流量3元/G 限速30M
菜单2：租金4元 流量4元/G 限速40M
```

用户自行选购菜单，同一个节点只能选择一个菜单

### 账单计费

以选购上方的`节点A菜单1`和`节点B菜单2`为例：

每个账单周期伊始，扣除两份租金共计5元，尔后按流量计费

## 用户角色

### 权限

系统支持以下权限

```text
//普通权限：
允许登录
允许使用节点
允许邀请他人

//管理权限
查看用户资料
编辑用户资料
编辑角色
编辑节点
编辑菜单
查看订单
查看财务记录
查看优惠券
编辑优惠券
查看管理员操作
```

系统支持以下属性

```text
初始邀请次数
账单周期
```

### 角色管理

系统预设以下角色：

| 角色 | 说明 |
| :--- | :--- |
| 默认用户 | 未使用邀请码注册的用户自动成为默认用户 |
| 受邀用户 | 使用邀请码注册的用户自动成为受邀用户 |
| 全权管理员 | 拥有所有管理权限的用户，网站第一个账户自动成为全权管理员 |

拥有任意`管理权限`的成员都会被视为管理员，并允许进入`管理界面`

任何管理员在`管理界面`的所有操作都会被记录

拥有`编辑角色`权限的用户视为全权管理员，并强制拥有所有权限，全权管理员可以自行根据权限创建角色，并将角色分配给他人，

例1：创建一个只有`允许登录`权限的角色，命名为“被封禁用户”，然后将角色分配给任意想要封禁的用户即可实现用户封禁

例2：编辑`默认用户`角色的`账单周期`属性为30天，`受邀用户`角色的`账单周期`属性为7天，则所有默认用户的账单周期都会变为30天，而受邀用户的账单周期都会变为7天

例3：affman角色和受邀用户角色的玩法以后再说

## 设置项

所有设置项均保存在数据库中，通过管理页面设置

## 负载均衡

通过负载均衡架构，可以同时运行多个后端

